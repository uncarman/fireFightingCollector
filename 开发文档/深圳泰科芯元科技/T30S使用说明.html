-------------T30设备的工作流程-----------------<br/>T30S开机后,&nbsp;会自动连接指定服务器并向该服务器发送数据。该服务器可以由客户自行修改，修改方法请参考本文“服务器指向设置”小节。<br/>T30S与服务器通信的协议，分为两种，一种是基于UDP的较精简的协议,&nbsp;另一种是基于TCP/IP的HTTP协议(默认的协议),&nbsp;用户可进行设置选择。设置方法参考本文“选择通信协议”小节。<br/>T30S可以接受任何服务器的指令并给予回应（T30S为UDP协议时使用5918端口接收；T30S为HTTP协议时使用12345端口接收）.<br/><br/>-------------------登陆T30的后台网页---------------------<br/>可以在电脑上通过IE浏览器访问T30的后台网页,&nbsp;登陆网页后,&nbsp;可以对T30进行设置,&nbsp;包括服务器指向,&nbsp;与服务器通信协议选择,&nbsp;网络配置,&nbsp;升级固件,...<br/>登陆方法:<br/>如果已经获得T30的IP,&nbsp;在IE浏览器地址栏输入:&nbsp;&nbsp;xx.xx.xx.xx:82,&nbsp;(xx代表设备IP),&nbsp;登陆设备，在弹出的登陆界面输入用户名和密码(root,&nbsp;abc123)<br/>如果无法获得T30的IP,&nbsp;可以让T30释放WIFI热点,&nbsp;用电脑连接T30的WIFI&nbsp;热点.&nbsp;<br/>T30释放热点操作方法,&nbsp;拔掉其网线,&nbsp;按住WIFI&nbsp;hotspot键3秒,&nbsp;等待WIFI灯常亮,&nbsp;此时模块即开始释放WIFI热点,&nbsp;既可以用电脑连接该热点,&nbsp;热点名称为T30的MAC,&nbsp;密码88888888<br/>T30释放热点时,&nbsp;其IP地址为192.168.91.1.&nbsp;电脑连接T30热点成功后,&nbsp;即可以在电脑IE浏览器地址栏输入:&nbsp;192.168.91.1:82访问T30后台网页.<br/>说明：IE浏览器登陆时,&nbsp;有时会弹出“此站点不安全”的提示，此时可忽略此提示，点击“详细信息”&nbsp;--&gt;&nbsp;“继续转到网页”,&nbsp;就会弹出登陆页面了。<br/><br/>------------------------服务器指向设置---------------------				<br/>IE浏览器登陆设备，在IE浏览器地址栏输入:&nbsp;&nbsp;xx.xx.xx.xx:82，（xx代表设备IP），登陆设备，在弹出的登陆界面输入用户名和密码（root,&nbsp;abc123）.成功后，选择“网络&nbsp;--&gt;&nbsp;服务器管理”，然后输入“服务器管理”密码，即可进入了修改界面。默认值为&nbsp;pad.snd02.com:/data/carry&nbsp;<br/>输入格式&nbsp;xxxxxx:yyyy/zzzz&nbsp;,&nbsp;其中&#39;xxxxxx&#39;为服务器的DNS或IP,&nbsp;&#39;yyyy&#39;为服务器的端口号,&nbsp;端口号可以为不写,&nbsp;如果不写,&nbsp;则应用程序会给定默认值(HTTP版8080,&nbsp;UDP版7758).zzzz为服务器入口,&nbsp;比如&nbsp;data/monitor<br/>说明:&nbsp;对于HTTP及UDP及其它协议,&nbsp;设置方法相同,&nbsp;服务器指向格式相同.<br/>&quot;服务器管理&quot;密码，会以邮件的形式发送给客户.<br/>使用此方法修改了服务器指向后需要重启T30S才会生效。<br/><br/>------------------------选择通信协议---------------------		<br/>187xxxxxxxxx的设备固件,&nbsp;2.63版本以上，模块与服务器通信协议,包括两种,&nbsp;一种基于UDP的较精简的协议,&nbsp;另一种是基于TCP/IP的HTTP协议,&nbsp;用户可进行设置选择,&nbsp;<br/>IE浏览器登陆设备，在IE浏览器地址栏输入:&nbsp;&nbsp;xx.xx.xx.xx:82，（xx代表设备IP），登陆设备，在弹出的登陆界面输入用户名和密码（root,&nbsp;abc123）.成功后，选择&nbsp;&quot;网络&nbsp;--&gt;&nbsp;通信协议&quot;，即进入了修改界面。在&quot;通信协议&quot;下拉框点击可进行选择(默认值为&nbsp;HTTP),&nbsp;选定后点击&quot;保存&amp;应用&quot;,&nbsp;之后不需要重启设备即会生效.<br/>修改了通信协议后,&nbsp;需要根据新选择的通信协议，重新设置服务器指向（服务器IP地址和端口号）。&nbsp;如果使用曼顿的服务器，基于HTTP协议时服务器端口号8080,&nbsp;基于UDP时服务器端口号7758.<br/><br/>-------------------固件升级---------------------<br/>IE浏览器登陆设备，在IE浏览器地址栏输入:&nbsp;&nbsp;xx.xx.xx.xx:82(xx代表设备IP),&nbsp;登陆设备后台网页，在弹出的登陆界面输入用户名和密码（root,&nbsp;abc123）.成功后，选择“系统&nbsp;--&gt;&nbsp;备份/升级”，然后在“刷写新的固件”栏目，选择文件，选择待升级的固件文件，然后点击“刷写固件”，接下来新的固件开始上传到设备，上传成功后，&nbsp;会弹出确认界面，点击“执行”，即自动开始升级了,要保证设备与电脑在同一个局域网，即连接到同一个路由器。<br/>选择“系统&nbsp;--&gt;&nbsp;备份/升级”后,&nbsp;在弹出的页面中,&nbsp;此时如果“保留配置”被选中,&nbsp;则会保留原来配置(WIFI&nbsp;ap,&nbsp;服务器指向等),&nbsp;此时如果“保留配置”不选中,&nbsp;则会恢复为默认配置。<br/>如何看升级完成?不是看网页,&nbsp;网页上很多时候是不会显示升级成功的.要看灯的状态.看到所有的灯熄灭了,&nbsp;大约30秒钟后,&nbsp;灯开始闪烁,&nbsp;则已经升级成功.<br/>升级过程需要1分钟到2分钟,&nbsp;升级期间不可以断电.<br/><br/>-------------------远程升级---------------------<br/>UDP协议时：<br/>需要将升级文件及对应的校验文件放在服务器的/download目录,&nbsp;服务器发送升级命令到目标T30S,&nbsp;升级命令中包含服务器的IP和端口.&nbsp;升级文件名字固定为T25V_UDP_Vxxxx.bin,&nbsp;校验文件名字固定为T25V_UDP_Vxxxx_md5sums.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;下载路径固定为&nbsp;xxxx:yyyy/download/,其中xxxx为服务器IP,&nbsp;yyyy为服务器端口.<br/><br/>基于HTTP协议时<br/>&nbsp;&nbsp;&nbsp;&nbsp;将升级文件及对应的校验文件放在服务器的任意目录,&nbsp;下发指令时指定该目录即可,&nbsp;对于下发的指令有如下要求:<br/>&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;T30S的固件文件名字必须是&nbsp;&quot;T25V*.bin&quot;,&nbsp;&nbsp;&nbsp;如&nbsp;T25V2.83.bin<br/>&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;&quot;appVersion&quot;:&quot;*.**&quot;&nbsp;,&nbsp;比如appVersion&quot;:&quot;2.83<br/>&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;platformVersion:\&quot;T25	&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;指令举例&nbsp;&nbsp;{&quot;ret&quot;:&quot;success&quot;,&quot;control&quot;:{&quot;cmd&quot;:&quot;UPGRADING&quot;,&quot;mac&quot;:&quot;187ED5315DCC&quot;,&quot;run&quot;:false,&quot;time&quot;:&quot;2019-05-08&nbsp;16:08:02&quot;,&quot;value&quot;:&quot;{\&quot;appVersion\&quot;:\&quot;2.83\&quot;,\&quot;platformVersion\&quot;:\&quot;T25\&quot;,\&quot;appUrl\&quot;:\&quot;http://app.sndtest.com:8000/download/T25V2.83.bin\&quot;}&quot;}}&nbsp;&nbsp;&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>T30S固件开发者需要做的工作是，将固件文件以及相应的校验文件(如T25V2.83_md5sums)，提供给服务器开发或管理人员。<br/>服务器管理人员需要做的工作是，将固件文件以及相应的校验文件，放到服务器指定目录下，在服务器进行录入，即填写新的固件的注册信息。完成后选择相应的T30S,点击升级按钮.<br/>T30S&nbsp;应用程序2.68及以上版本支持远程升级.<br/><br/><br/>----------------T30S的WIFI热点----------------------<br/>T30S可以释放WIFI热点，客户可以用他的电脑或者手机连接该热点。<br/>需要拔掉T30S的网线,&nbsp;按住WIFI键2秒或者更久(不能超过10秒),&nbsp;等待WIFI灯常亮,&nbsp;此时模块释放WIFI热点,&nbsp;用手机搜索该热点，热点SSID为该T30S的MAC地址,&nbsp;热点密码88888888<br/>退出热点模式，按住WIFI键2秒或者更久(不能超过10秒).等待WIFI灯由常亮改为慢闪烁.<br/><br/><br/>------------------查看版本version---------------------------<br/>查版本,&nbsp;查应用程序版本,<br/>T30S的程序由操作系统和DTU应用程序组成,&nbsp;操作系统为linux操作系统,&nbsp;操作系统基本不会升级;&nbsp;DTU应用程序是我方开发的,&nbsp;实现采集开关数据并上传服务器,&nbsp;接收服务器指令等功能,&nbsp;此应用程序会持续不断的不定期更新升级。<br/>查看操作系统版本,&nbsp;可以通过IE浏览器登陆T30,&nbsp;&quot;系统&quot;&nbsp;--&gt;&nbsp;&quot;状态&quot;&nbsp;--&gt;&nbsp;&quot;内核版本&quot;。<br/>查看DTU应用程序版本,&nbsp;要在服务器上看,&nbsp;UDP版本协议,&nbsp;T30发送到服务器的注册消息B0,&nbsp;消息里面的VER字段即DTU应用程序版本号;&nbsp;或者&quot;获取网络配置&quot;消息,&nbsp;消息里面的VER即DTU应用程序版本号,&nbsp;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP协议的,&nbsp;在POSTRT消息里面serverinfo{...&nbsp;version...}里面的version为T30S&nbsp;DTU应用程序的版本号<br/><br/><br/>-------------------恢复出厂设置---------------<br/>按下WIFI&nbsp;hotspot键,&nbsp;持续12秒,&nbsp;T30即开始恢复出厂,&nbsp;T30会自动重启.<br/>恢复出厂设置后,&nbsp;一切配置会恢复出厂默认值,&nbsp;包括服务器指向(会恢复默认,&nbsp;即指向曼顿的服务器),&nbsp;与服务器通信协议,&nbsp;WIFI&nbsp;AP的名称和密码,&nbsp;各个开关名称.<br/>恢复出厂设置后,&nbsp;一切数据会清空,&nbsp;包括历史电量,&nbsp;电压,&nbsp;电流,&nbsp;报警,&nbsp;定时,因此请谨慎进行此操作,&nbsp;建议只是在机器无法启动的情况才进行此操作.<br/><br/>------------------查询设备IP查IP----------------<br/>方法1,&nbsp;电脑安装网络捕捉包工具如wireshark,&nbsp;电脑与T30在同一个局域网,&nbsp;wireshark设置过滤条件udp&nbsp;only,&nbsp;在捕捉的数据包中,那种广播消息(目的地IP为255.255.255.255),根据MAC地址来对应IP.<br/>方法2,登录T30所连接的路由器,&nbsp;进行查看,&nbsp;根据MAC地址来对应IP.<br/>方法3,&nbsp;设备向服务器发送的数据中就有自己的IP,&nbsp;从设备发送给服务器的数据中看.<br/>未知IP情况的使用:<br/>查不到IP，也不影响使用，不影响升级.&nbsp;拔掉网线,&nbsp;按住WIFI键2秒,&nbsp;等待WIFI灯常亮,&nbsp;此时模块释放WIFI热点,&nbsp;用电脑连接该热点,&nbsp;连接成功后,&nbsp;在电脑打开IE浏览器,&nbsp;地址栏输入&nbsp;192.168.91.1:82<br/>T30释放热点时,&nbsp;是作为路由器,&nbsp;其IP地址为192.168.91.1.&nbsp;<br/>T30作为终端设备,&nbsp;连接其它路由器包括WIFI路由器时,&nbsp;其网段与其所连接的路由器为同一个网段<br/><br/>-------------自动地址设置--------------------------<br/>一个T30S可以连接1~30个微型断路器开关，需要为每个开关设置唯一的地址（1~30），设置方法为：<br/>1.在APP电博士里面选择智能终端，然后在弹出的页面选择&quot;线路取名，功率限定&quot;&gt;&quot;线路设置&quot;&gt;&quot;地址设置&quot;。<br/>&nbsp;&nbsp;&nbsp;然后点击&quot;开始&quot;,&nbsp;<br/>2.先把所有开关合闸，然后把所有开关分闸;<br/>&nbsp;&nbsp;这时所有开关会进入设置地址模式,&nbsp;开关的灯快速闪烁(频率每秒2次)说明其已进入此模式.&nbsp;<br/>&nbsp;&nbsp;对未进入此模式的开关,&nbsp;重新合闸再分闸;<br/>3.选择第一个开关，选择左边第一个开关。按下按键，按住五秒钟以上，然后松开,<br/>&nbsp;&nbsp;&nbsp;T30S即开始为每个开关分配地址(从左到右依次分配);&nbsp;5秒钟左右即完成了所有开关的地址分配;&nbsp;<br/>&nbsp;&nbsp;&nbsp;完成地址设置的开关会自动退出地址设置模式(开关的灯慢闪烁);<br/>4.查看是否还有开关地址没有设置成功(未退出设置地址模式),&nbsp;<br/>&nbsp;&nbsp;如果有,&nbsp;则选择一个这样的开关,&nbsp;按下按键5秒钟以上后松开.&nbsp;重复此步骤,&nbsp;直到所有开关地址设置成功;<br/>&nbsp;&nbsp;如果是多排开关，两排之间用连接线连接。第一排完成后，需要手动按下第二排左边第一个开关的按键，按住五秒钟以上，然后松开。如此第三排，第四排，....<br/>5.在手机里APP上.&nbsp;点击&quot;结束&quot;<br/><br/>如果客户是通过自己的服务器来设置开关地址，可以参考协议文档（如UDP通信协议COMMAND控制设置命令0xA5，自动分配地址）来实现。<br/>